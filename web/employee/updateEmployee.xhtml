<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

    <f:view contentType="text/html">
        <h:head>
            <f:facet name="first">
                <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
                <title>Update Employees</title>
                <link href="css/cssLayout.css" rel="stylesheet"/>
            </f:facet>
        </h:head>

        <h:body>
            <p:layout fullPage="true">
                <p:layoutUnit position="north" size="150" closable="true" collapsible="true">
                    <center><img src="../resources/images/header/Neo.png" height="100" width=""/></center>
                </p:layoutUnit>

                <p:layoutUnit position="south" size="70">
                    <center>
                        <h6 id="footer">Neo Technologies Ltd. || @ CopyRight By Md. Emran Hossain || email: emranhos1@gmail.com</h6>
                    </center>
                </p:layoutUnit>

                <p:layoutUnit position="west" size="175" header="Category" collapsible="true">
                    <p:menu>
                        <p:menuitem value="Home" url="../index.xhtml" />
                        <p:menuitem value="Product" url="../product/product.xhtml" />
                        <p:menuitem value="Employees" url="../employee/employee.xhtml" />
                        <p:menuitem value="Payment" url="../payment/employeePayment.xhtml" />
                        <p:menuitem value="Log Out" url="../index.xhtml" />
                    </p:menu>
                </p:layoutUnit>

                
                <p:dialog id="addEmp" widgetVar="addEmp" header="Add Employee" hideEffect="explode" appendTo="@(body)" resizable="false" draggable="false" closeOnEscape="true">  
                    <h:form>
                        <p:messages id="mag" closable="true" ></p:messages>
                        <p:panelGrid columns="2">
                            <p:outputLabel value="First Name :"/>
                            <p:inputText id="fname" value="#{employeeMB.employee.fname}"/>
                            <p:outputLabel value="Last Name :"/>
                            <p:inputText id="lname" value="#{employeeMB.employee.lname}"/>
                            <p:outputLabel value="Gender :"/>
                            <p:selectOneRadio id="gender" value="#{employeeMB.employee.gender}">
                                <f:selectItem itemLabel="Male" itemValue="Male"/>
                                <f:selectItem itemLabel="Female" itemValue="Female"/>
                            </p:selectOneRadio>
                            <p:outputLabel value="Salary :"/>
                            <p:inputText id="salary" value="#{employeeMB.employee.salary}"/>
                            <p:outputLabel value="Address :"/>
                            <p:inputText id="address" value="#{employeeMB.employee.address}"/>
                            <p:outputLabel value="District :"/>
                            <p:selectOneMenu id="console" value="#{employeeMB.employee.district}" style="width:125px">
                                <f:selectItem itemLabel="Select One" itemValue="" />
                                <f:selectItem itemLabel="Dhaka" itemValue="Dhaka" />
                                <f:selectItem itemLabel="Barishal" itemValue="Barishal" />
                                <f:selectItem itemLabel="Khulna" itemValue="Khulna" />
                                <f:selectItem itemLabel="Rajshahi" itemValue="Rajshahi" />
                                <f:selectItem itemLabel="Manikgonj" itemValue="Manikgonj" />
                                <f:selectItem itemLabel="Savar" itemValue="Savar" />
                            </p:selectOneMenu>
                            <p:outputLabel value="Country :"/>
                            <p:inputText id="country" value="#{employeeMB.employee.country}"/>
                            <p:outputLabel value="Phone No :"/>
                            <p:inputText id="pNo" value="#{employeeMB.employee.phone}"/>
                            <p:outputLabel value="Email :"/>
                            <p:inputText id="email" value="#{employeeMB.employee.email}"/>
                            <p:outputLabel value="Date of Birth :"/>
                            <p:calendar id="dob" value="#{employeeMB.employee.dateofBirth}" label="DatePosted:" required="true" pattern="dd/MM/yyyy" effect="slideDown" requiredMessage="Please Enter Date of Birth!" navigator="true" showButtonPanel="true" yearRange="c-60:c+60" placeholder="Date of Birth" />
                        </p:panelGrid> 
                        <p:commandButton id="submit" value="Submit" action="#{employeeMB.addemployee()}" update="mag"/>
                        <p:commandButton id="cancel" value="Cancel" onclick="handleComplete(xhr, status, args)" />  
                    </h:form>
                </p:dialog>
                <h:outputScript>  
                    /*<![CDATA[*/  
                    function handleComplete(xhr, status, args) {  
                    if(args && args.validName) {  
                    addEmp.hide();
                    }  
                    }/* ]]>*/
                </h:outputScript>

                <p:dialog id="userDetail2" widgetVar="$userDetail2" header="Update User" hideEffect="explode" appendTo="@(body)" resizable="false" draggable="false" closeOnEscape="true">  
                    <h:form>
                        <p:panelGrid columns="2">                          
                            <h:outputLabel for="fname" value="First Name: *" />  
                            <p:inputText id="fname" value="#{employeeMB.newEmployee.fname}" label="First Name" placeholder="First Name" />               
                            <h:outputLabel for="lname" value="Last Name: *" />  
                            <p:inputText id="lname" value="#{employeeMB.newEmployee.lname}" label="Last Name" placeholder="Last Name" />
                            <h:outputLabel for="sex" value="Choose Gender" />  
                            <p:selectOneMenu id="sex" label="Choose Gender" value="#{employeeMB.newEmployee.gender}" effect="fold">  
                                <f:selectItem itemLabel="Select One" itemValue="" />  
                                <f:selectItem itemLabel="Male" itemValue="Male" />  
                                <f:selectItem itemLabel="Female" itemValue="Female" />  
                            </p:selectOneMenu>
                            <h:outputLabel for="salary" value="Salary: *" />  
                            <p:inputText id="salary" value="#{employeeMB.newEmployee.salary}" label="Salary" placeholder="Salary" />
                            <h:outputLabel for="address" value="Address : *" />  
                            <p:inputText id="address" value="#{employeeMB.newEmployee.address}" label="Address" placeholder="Address"/>
                            <h:outputLabel for="district" value="District : *" />  
                            <p:inputText id="district" value="#{employeeMB.newEmployee.district}" label="District" placeholder="District" />
                            <h:outputLabel for="country" value="Country : *" />  
                            <p:inputText id="country" value="#{employeeMB.newEmployee.country}" label="Country" placeholder="Country"/>
                            <h:outputLabel for="phone" value="Phone : *" />  
                            <p:inputText id="phone" value="#{employeeMB.newEmployee.phone}" label="Phone" placeholder="Phone"/>
                            <h:outputLabel for="email" value="Email : *" />  
                            <p:inputText id="email" value="#{employeeMB.newEmployee.email}" label="Email" placeholder="Email"/>
                            <p:outputLabel for="dob" value="User Date of Birth" />  
                            <p:calendar id="dob" value="#{employeeMB.newEmployee.dateofBirth}" label="DatePosted:" required="true" pattern="dd/MM/yyyy" effect="slideDown" requiredMessage="Please Enter Date of Birth!" navigator="true" showButtonPanel="true" yearRange="c-60:c+60" placeholder="Date of Birth" />                              
                            <p:commandButton value="Update" ajax="true" icon="ui-icon-disk" update=":fromEmp:empTable" actionListener="#{employeeMB.updateEmployee(employeeMB.newEmployee)}" oncomplete="handleComplete(xhr, status, args)" />  
                            <p:commandButton value="Cancel" id="cancelButtonId" onclick="handleComplete(xhr, status, args)" />  
                        </p:panelGrid>  
                    </h:form> 
                </p:dialog> 
                <h:outputScript id="handleCompleteScript" target="body">  
                    /* 
                    <![CDATA[ */  
                    function handleComplete(xhr, status, args) {  
                    if(args && args.validName) {  
                    $userDetail2.hide();  
                    }  
                    }  
                    /* ]]>*/  
                </h:outputScript>

                <p:dialog id="userDetail3" widgetVar="$userDetail3" header="Delete User" hideEffect="explode" appendTo="@(body)" resizable="false" draggable="false" closeOnEscape="true">  
                    <h:form>  
                        <h:inputHidden value="#{employeeMB.newEmployee.id}" />
                        <p:panelGrid columns="2">                     

                            <p:commandButton value="Delete" ajax="true" icon="ui-icon-disk" update=":fromEmp:empTable" actionListener="#{employeeMB.deleteEmployee(employeeMB.newEmployee)}" oncomplete="handleComplete2(xhr, status, args)" />  
                            <p:commandButton value="Cancel" id="cancelButtonId" onclick="handleComplete2(xhr, status, args)" />  
                        </p:panelGrid>  
                    </h:form>  

                </p:dialog>  
                <h:outputScript id="handleCompleteScript" target="body">  
                    /* 
                    <![CDATA[ */  
                    function handleComplete2(xhr, status, args) {  
                    if(args && args.validName) {  
                    $userDetail3.hide();  
                    }  
                    }  
                    /* ]]>*/  
                </h:outputScript>
                <p:layoutUnit position="center">
                    <center>
                        <h1>Update Employee</h1>
                        <h:form id="fromEmp">
                            <p:commandButton icon="ui-icon-plusthick" id="addEmp" value="Add Employee" update="empTable" ajax="true" oncomplete="PF('addEmp').show()"/>

                            <p:dataTable resizableColumns="true" var="emp" value="#{displayEmployeeMB.allEmployee}" paginator="true" rows="5" id="empTable">
                                <p:column headerText="Record No" style="text-align: left;">
                                    <h:outputText value="#{emp.id}" />  
                                </p:column>
                                <p:column headerText="First Name :" style="text-align: left;">
                                    <h:outputText value="#{emp.fname}" />  
                                </p:column>
                                <p:column headerText="Last Name :" style="text-align: left;">
                                    <h:outputText value="#{emp.lname}" />  
                                </p:column>
                                <p:column headerText="Salary :" style="text-align: left;">
                                    <h:outputText value="#{emp.salary}" />  
                                </p:column>
                                <p:column headerText="Address" style="text-align: left;">
                                    <h:outputText value="#{emp.address}" />  
                                </p:column>
                                <p:column headerText="Phone" style="text-align: left;">
                                    <h:outputText value="#{emp.phone}" />  
                                </p:column>
                                <p:column headerText="Email" style="text-align: left;">
                                    <h:outputText value="#{emp.email}" />  
                                </p:column>
                                <p:column headerText="Date of Birth" style="text-align: left;">
                                    <h:outputText value="#{emp.dateofBirth}" />  
                                </p:column>
                                <p:column headerText="Edit" style="text-align: center">  
                                    <p:commandButton icon="ui-icon-pencil" id="editUserBtn" value="Edit" ajax="true" actionListener="#{employeeMB.changeEmp(emp)}" update=":userDetail2" oncomplete="PF('$userDetail2').show()" />  

                                </p:column>
                                <p:column headerText="Delete" style="text-align: center">  
                                    <p:commandButton icon="ui-icon-pencil" id="deleteUserBtn" value="Delete" ajax="true" actionListener="#{employeeMB.changeEmp(emp)}" update=":userDetail3" oncomplete="PF('$userDetail3').show()" />  
                                </p:column>
                            </p:dataTable>
                        </h:form>                 
                    </center>
                </p:layoutUnit>

            </p:layout>
        </h:body>
    </f:view>
</html>